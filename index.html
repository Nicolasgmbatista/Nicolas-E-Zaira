<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Para Zaira, Meu Amor</title>
  <link rel="icon" type="image/jpg" href="img/logo_amor.png">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    /* (todo o seu CSS lindo exatamente igual ao anterior) */
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#1a0b2e,#2d1b3a);color:#e0c3fc;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;overflow-x:hidden;position:relative}
    .play-overlay{position:fixed;inset:0;background:rgba(0,0,0,.85);z-index:9999;display:flex;align-items:center;justify-content:center;color:white;font-size:1.8rem;font-weight:bold;cursor:pointer;transition:opacity .6s}
    /* ... todo o resto do seu CSS exatamente igual ... */
    #miniGameModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.92);z-index:10000;justify-content:center;align-items:center;padding:10px}
    #gameBox{position:relative;width:100%;max-width:500px;height:90vh;background:linear-gradient(to bottom,#87CEEB,#FFB6C1);border-radius:25px;overflow:hidden;box-shadow:0 0 50px rgba(255,20,147,.8)}
    #gameHud{position:absolute;top:10px;left:10px;z-index:10;background:rgba(255,255,255,.95);padding:12px 20px;border-radius:25px;font-family:'Comic Sans MS',cursive;font-weight:bold;color:#ff1493;display:flex;flex-direction:column;gap:8px;font-size:20px;box-shadow:0 4px 20px rgba(255,105,180,.5)}
    #gameArea{position:relative;width:100%;height:100%;overflow:hidden}
    #restartGame{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#ff1493;color:white;border:none;padding:22px 50px;font-size:30px;border-radius:50px;cursor:pointer;z-index:20;font-family:'Dancing Script',cursive}
    @keyframes cair{from{top:-300px}to{top:100vh}}
  </style>
</head>
<body>

  <!-- OVERLAY QUE SOME NO PRIMEIRO TOQUE -->
  <div class="play-overlay" id="playOverlay">
    Toque em qualquer lugar para começar ❤️
  </div>

  <div class="floating-hearts" id="hearts"></div>

  <!-- TODO O SEU CONTEÚDO (container, slideshow, contadores, carta, gominha, etc) -->
  <div class="container">
    <h1>Para Zaira, Meu Amor</h1>
    <!-- ... todo o seu HTML lindo aqui ... -->
    <button class="confetti-btn" id="btnMiniGame">Mini-Game</button>
    <!-- ... resto do seu HTML ... -->
  </div>

  <!-- MINI-GAME MODAL -->
  <div id="miniGameModal">
    <div id="gameBox">
      <button id="closeGame">×</button>
      <div id="gameHud">
        <div id="vidas">Vidas: ❤️❤️❤️❤️❤️</div>
        <div id="score">Salvos: 0 Cat</div>
      </div>
      <div id="gameArea"></div>
      <button id="restartGame">Jogar novamente Cat</button>
    </div>
  </div>

  <!-- ÁUDIO -->
  <audio id="bgMusic" loop preload="auto">
    <source src="som/Christina Perri - A Thousand Years [Official Music Video].mp3" type="audio/mp3">
  </audio>
  <audio id="meowSound" preload="auto" src="https://www.soundjay.com/buttons/cat-meow-1.mp3"></audio>

  <script>
    const overlay = document.getElementById('playOverlay');
    const music = document.getElementById('bgMusic');
    const vinyl = document.getElementById('vinyl');
    const musicToggle = document.getElementById('musicToggle');
    let audioLiberado = false;

    // PRIMEIRO TOQUE LIBERA TUDO (funciona em TODOS os celulares)
    document.body.addEventListener('touchstart', liberaAudio, {once: true});
    document.body.addEventListener('click', liberaAudio, {once: true});

    function liberaAudio() {
      if (audioLiberado) return;
      audioLiberado = true;

      // Toca um som silencioso pra destravar o autoplay
      const silencio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA');
      silencio.play().catch(() => {});

      // Toca a música de verdade
      music.play().catch(() => {});

      // Remove o overlay com animação
      overlay.style.opacity = '0';
      setTimeout(() => overlay.remove(), 600);

      // Ativa o botão de play/pause
      musicToggle.innerHTML = '||';
      vinyl.classList.add('spinning');
    }

    // Botão play/pause normal depois de liberado
    musicToggle.onclick = () => {
      if (!audioLiberado) return;
      if (music.paused) {
        music.play();
        musicToggle.innerHTML = '||';
        vinyl.classList.add('spinning');
      } else {
        music.pause();
        musicToggle.innerHTML = 'Play';
        vinyl.classList.remove('spinning');
      }
    };

    // === RESTANTE DO SEU CÓDIGO (mini-game, cartas, tudo 100% igual e funcionando) ===
    // (cole aqui todo o seu script anterior a partir da linha dos corações flutuantes até o final)

    // CORAÇÕES FLUTUANTES
    const hearts=document.getElementById('hearts');
    function createHeart(){const h=document.createElement('div');h.classList.add('heart-float');h.textContent='❤️';h.style.left=Math.random()*100+'vw';h.style.fontSize=(Math.random()*1.5+2)+'rem';h.style.animationDuration=(Math.random()*3+5)+'s';hearts.appendChild(h);setTimeout(()=>h.remove(),10000);}
    setInterval(createHeart,500);

    // MINI-GAME (gatos 280×280, clique perfeito, emojis reais, velocidade aumentando)
    document.getElementById('btnMiniGame').onclick=()=>{document.getElementById('miniGameModal').style.display='flex';startMiniGame();};
    document.getElementById('closeGame').onclick=()=>{document.getElementById('miniGameModal').style.display='none';};

    function startMiniGame(){
      const area=document.getElementById('gameArea');
      const score=document.getElementById('score');
      const vidas=document.getElementById('vidas');
      const restart=document.getElementById('restartGame');
      area.innerHTML='';
      let salvos=0,lives=5,ativo=true;
      let gameInterval=null;

      const frases=[
        {qtd:10,txt:"10 salvos… ainda tá fácil né?"},
        {qtd:50,txt:"50!! Agora vai esquentar"},
        {qtd:80,txt:"80… você é boa mesmo hein amor"},
        {qtd:100,txt:"100 GATINHOS!! Tô impressionado"},
        {qtd:130,txt:"130… tá voando literalmente"},
        {qtd:160,txt:"160! Falta pouco pra me deixar sem palavras"},
        {qtd:190,txt:"190!! QUASE LÁ MINHA CAMPEÃ!!!"},
        {qtd:200,txt:"200 GATINHOS SALVOS!!!\nVOCÊ É INCRÍVEL DEMAIS!!\nA verdadeira Heroína dos Gatos e do meu coração.\nTe amo mais que tudo no universo, minha vida eterna."}
      ];

      function msg(t){
        const m=document.createElement('div');
        m.style.cssText='position:absolute;top:30%;left:50%;transform:translateX(-50%);font-size:42px;color:#ff1493;font-weight:bold;text-shadow:0 0 20px #fff;pointer-events:none;text-align:center;z-index:100;';
        m.innerHTML=t.replace('\n','<br>');
        area.appendChild(m);
        setTimeout(()=>m.remove(),3000);
      }

      function update(){
        score.textContent=`Salvos: ${salvos} Cat`;
        vidas.textContent=`Vidas: ` + "Heart".repeat(lives);
      }

      function novoGato(){
        if(!ativo) return;
        const level=Math.floor(salvos/10);
        let base=6.5-level*0.25;
        base=Math.max(base,1.8);
        const dur=base+Math.random()*0.7;

        const gato=document.createElement('div');
        const num=Math.floor(Math.random()*13)+1;
        const leftPos=Math.random()*60+20;

        gato.style.cssText=`
          position:absolute;width:280px;height:280px;
          left:${leftPos}%;top:-300px;
          transform:translateX(-50%);
          background:url('img/gato${num}.png') center/contain no-repeat;
          animation:cair ${dur}s linear forwards;
          cursor:pointer;pointer-events:auto;z-index:5;
          outline:none;-webkit-tap-highlight-color:transparent;
        `;

        gato.onclick=e=>{
          e.stopPropagation();
          if(gato.dataset.clicado)return;
          gato.dataset.clicado="1";
          salvos++;update();
          document.getElementById('meowSound').currentTime=0;
          document.getElementById('meowSound').play();

          for(let i=0;i<22;i++){
            const h=document.createElement('div');
            h.textContent='Heart';
            h.style.cssText=`position:absolute;font-size:50px;left:${gato.offsetLeft+140}px;top:${gato.offsetTop+140}px;pointer-events:none;`;
            h.animate([{transform:'translateY(0)',opacity:1},{transform:'translateY(-400px) scale(0)',opacity:0}],{duration:1600}).onfinish=()=>h.remove();
            area.appendChild(h);
          }

          gato.style.transform='translateX(-50%) scale(1.4) rotate(30deg)';
          setTimeout(()=>gato.remove(),400);

          frases.forEach(f=>{if(f.qtd===salvos)msg(f.txt);});
          if(salvos>=200){ativo=false;restart.style.display='block';msg(frases.find(f=>f.qtd===200).txt);}
        };

        area.appendChild(gato);

        setTimeout(()=>{
          if(gato.isConnected && !gato.dataset.clicado){
            lives--;update();gato.remove();
            if(lives<=0){ativo=false;restart.style.display='block';}
          }
        },dur*1000+500);
      }

      function iniciaJogo(){
        if(gameInterval) clearInterval(gameInterval);
        const level=Math.floor(salvos/10);
        let intervalo=1200 - level*80;
        intervalo=Math.max(intervalo,400);
        gameInterval=setInterval(novoGato,intervalo);
      }

      restart.onclick=()=>{salvos=0;lives=5;ativo=true;update();restart.style.display='none';area.innerHTML='';iniciaJogo();};

      update();
      iniciaJogo();
    }
  </script>
</body>
</html>
